{% set shop = order.shop %}
{% set user = shop.user %}

{% set itemEntity = order.items|first %}
{% set itemName = app.request.locale == 'fr'
    ? (itemEntity.nameFR ?? itemEntity.nameEN)
    : (itemEntity.nameEN ?? itemEntity.nameFR)
%}

<div class="order-card">
    <div class="copy-popup"></div>

    <div class="order-line icon">
        <img src="{{ asset('assets/images/uploads/api/' ~ itemEntity.imageName) }}" alt="{{ itemName }}">
    </div>

    <div class="order-line name btn-menu">
        <a href="{{ path('item_show', { name: itemEntity.uniqueName|trim('/')|replace({'/':'-'}) }) }}">
            <span class="value">{{ itemName }}</span>
        </a>
    </div>

    <div class="order-line price">
        <span class="value price-value">{{ order.price }} <i class="fa-solid fa-coins platinum-icon"></i></span>
    </div>

    <div class="order-line quantity">
        <span class="value">{{ order.stocks }} <i class="fa-solid fa-cubes"></i></span>
    </div>

    {% if order.rank %}
        <div class="order-line rank">
            <span class="value">{{ order.rank }} {{ 'orders.off'|trans }} {{ itemEntity.fusionLimit }}</span>
        </div>
    {% else %}
        <div class="order-line rank">
            <span class="value"></span>
        </div>
    {% endif %}

    <div class="order-line action">
        {% if order.sellOrBuy is defined and order.sellOrBuy == true %}
            {% set message = 'orders.whisper_message'|trans({
                '%pseudo%': user.pseudo,
                '%item%': itemName,
                '%price%': order.price
            }) %}
            {% set btnLabel = 'buy'|trans %}
        {% else %}
            {% set message = 'orders.whisper_message_sell'|trans({
                '%pseudo%': user.pseudo,
                '%item%': itemName,
                '%price%': order.price
            }) %}
            {% set btnLabel = 'sell'|trans %}
        {% endif %}
    </div>
</div>
